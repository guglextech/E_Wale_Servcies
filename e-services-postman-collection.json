{
  "info": {
    "name": "E-Services API - Commission Services",
    "description": "Updated Postman collection for E-Services API with Commission Service implementation. All services now handle delivery after payment is successful, not payment initiation.",
    "version": "2.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "your_jwt_token_here",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Airtime Services",
      "description": "Airtime delivery via Hubtel Commission Service",
      "item": [
        {
          "name": "Deliver Airtime",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"destination\": \"233550123456\",\n  \"amount\": 10.50,\n  \"network\": \"MTN\",\n  \"clientReference\": \"airtime_123456\",\n  \"callbackUrl\": \"https://your-callback-url.com/airtime/callback\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/airtime/deliver",
              "host": ["{{baseUrl}}"],
              "path": ["airtime", "deliver"]
            },
            "description": "Deliver airtime to a mobile number via Hubtel Commission Service. This is called after payment is successful."
          },
          "response": []
        },
        {
          "name": "Handle Airtime Callback",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ResponseCode\": \"0000\",\n  \"Message\": \"Transaction successful\",\n  \"ClientReference\": \"AIRTIME_airtime_123456_1234567890\",\n  \"TransactionId\": \"TXN123456789\",\n  \"Amount\": 10.50,\n  \"Commission\": \"0.50\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/airtime/callback",
              "host": ["{{baseUrl}}"],
              "path": ["airtime", "callback"]
            },
            "description": "Handle callback from Hubtel Commission Service for airtime delivery"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Bundle Services",
      "description": "Data bundle delivery and queries via Hubtel Commission Service",
      "item": [
        {
          "name": "Query Available Bundles",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/bundle/query?destination=233550123456&network=MTN&bundleType=data",
              "host": ["{{baseUrl}}"],
              "path": ["bundle", "query"],
              "query": [
                {
                  "key": "destination",
                  "value": "233550123456"
                },
                {
                  "key": "network",
                  "value": "MTN"
                },
                {
                  "key": "bundleType",
                  "value": "data"
                }
              ]
            },
            "description": "Query available data bundles for a specific network and mobile number"
          },
          "response": []
        },
        {
          "name": "Deliver Bundle",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"destination\": \"233550123456\",\n  \"amount\": 5.00,\n  \"network\": \"MTN\",\n  \"bundleType\": \"data\",\n  \"bundleValue\": \"1GB_24HRS\",\n  \"clientReference\": \"bundle_123456\",\n  \"callbackUrl\": \"https://your-callback-url.com/bundle/callback\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/bundle/deliver",
              "host": ["{{baseUrl}}"],
              "path": ["bundle", "deliver"]
            },
            "description": "Deliver data bundle to a mobile number via Hubtel Commission Service. This is called after payment is successful."
          },
          "response": []
        },
        {
          "name": "Handle Bundle Callback",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ResponseCode\": \"0000\",\n  \"Message\": \"Bundle delivered successfully\",\n  \"ClientReference\": \"BUNDLE_bundle_123456_1234567890\",\n  \"TransactionId\": \"TXN123456789\",\n  \"Amount\": 5.00,\n  \"Commission\": \"0.25\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/bundle/callback",
              "host": ["{{baseUrl}}"],
              "path": ["bundle", "callback"]
            },
            "description": "Handle callback from Hubtel Commission Service for bundle delivery"
          },
          "response": []
        }
      ]
    },
    {
      "name": "TV Bills Services",
      "description": "TV bill payments and account queries via Hubtel Commission Service",
      "item": [
        {
          "name": "Query TV Account",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/tv-bills/query?provider=DSTV&accountNumber=1234567890",
              "host": ["{{baseUrl}}"],
              "path": ["tv-bills", "query"],
              "query": [
                {
                  "key": "provider",
                  "value": "DSTV"
                },
                {
                  "key": "accountNumber",
                  "value": "1234567890"
                }
              ]
            },
            "description": "Query TV account information for bill payment"
          },
          "response": []
        },
        {
          "name": "Pay TV Bill",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"provider\": \"DSTV\",\n  \"accountNumber\": \"1234567890\",\n  \"amount\": 50.00,\n  \"clientReference\": \"tv_bill_123456\",\n  \"callbackUrl\": \"https://your-callback-url.com/tv-bills/callback\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tv-bills/pay",
              "host": ["{{baseUrl}}"],
              "path": ["tv-bills", "pay"]
            },
            "description": "Pay TV bill via Hubtel Commission Service. This is called after payment is successful."
          },
          "response": []
        },
        {
          "name": "Handle TV Bill Callback",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ResponseCode\": \"0000\",\n  \"Message\": \"TV bill payment successful\",\n  \"ClientReference\": \"TVBILL_tv_bill_123456_1234567890\",\n  \"TransactionId\": \"TXN123456789\",\n  \"Amount\": 50.00,\n  \"Commission\": \"2.50\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/tv-bills/callback",
              "host": ["{{baseUrl}}"],
              "path": ["tv-bills", "callback"]
            },
            "description": "Handle callback from Hubtel Commission Service for TV bill payment"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Utility Services",
      "description": "Utility top-ups and queries via Hubtel Commission Service",
      "item": [
        {
          "name": "Query ECG Meters",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/utility/ecg/query?mobileNumber=233550123456",
              "host": ["{{baseUrl}}"],
              "path": ["utility", "ecg", "query"],
              "query": [
                {
                  "key": "mobileNumber",
                  "value": "233550123456"
                }
              ]
            },
            "description": "Query ECG meters associated with a mobile number"
          },
          "response": []
        },
        {
          "name": "Top Up ECG",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"mobileNumber\": \"233550123456\",\n  \"meterNumber\": \"ECG123456789\",\n  \"amount\": 20.00,\n  \"clientReference\": \"ecg_123456\",\n  \"callbackUrl\": \"https://your-callback-url.com/utility/callback\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/utility/ecg/topup",
              "host": ["{{baseUrl}}"],
              "path": ["utility", "ecg", "topup"]
            },
            "description": "Top up ECG meter via Hubtel Commission Service. This is called after payment is successful."
          },
          "response": []
        },
        {
          "name": "Query Ghana Water Account",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/utility/ghana-water/query?meterNumber=123456789012&mobileNumber=233550123456",
              "host": ["{{baseUrl}}"],
              "path": ["utility", "ghana-water", "query"],
              "query": [
                {
                  "key": "meterNumber",
                  "value": "123456789012"
                },
                {
                  "key": "mobileNumber",
                  "value": "233550123456"
                }
              ]
            },
            "description": "Query Ghana Water account information"
          },
          "response": []
        },
        {
          "name": "Top Up Ghana Water",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"meterNumber\": \"123456789012\",\n  \"email\": \"user@example.com\",\n  \"sessionId\": \"session_123456\",\n  \"amount\": 15.00,\n  \"clientReference\": \"ghana_water_123456\",\n  \"callbackUrl\": \"https://your-callback-url.com/utility/callback\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/utility/ghana-water/topup",
              "host": ["{{baseUrl}}"],
              "path": ["utility", "ghana-water", "topup"]
            },
            "description": "Top up Ghana Water meter via Hubtel Commission Service. This is called after payment is successful."
          },
          "response": []
        },
        {
          "name": "Handle Utility Callback",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ResponseCode\": \"0000\",\n  \"Message\": \"Utility top-up successful\",\n  \"ClientReference\": \"ECG_ecg_123456_1234567890\",\n  \"TransactionId\": \"TXN123456789\",\n  \"Amount\": 20.00,\n  \"Commission\": \"1.00\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/utility/callback",
              "host": ["{{baseUrl}}"],
              "path": ["utility", "callback"]
            },
            "description": "Handle callback from Hubtel Commission Service for utility top-ups"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Voucher Services",
      "description": "Result checker voucher services",
      "item": [
        {
          "name": "Purchase Voucher",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"voucherType\": \"BECE\",\n  \"quantity\": 2,\n  \"clientReference\": \"voucher_123456\",\n  \"callbackUrl\": \"https://your-callback-url.com/vouchers/callback\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/vouchers/purchase",
              "host": ["{{baseUrl}}"],
              "path": ["vouchers", "purchase"]
            },
            "description": "Purchase result checker vouchers"
          },
          "response": []
        },
        {
          "name": "Handle Voucher Callback",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"ResponseCode\": \"0000\",\n  \"Message\": \"Voucher purchase successful\",\n  \"ClientReference\": \"voucher_123456\",\n  \"TransactionId\": \"TXN123456789\",\n  \"Amount\": 10.00,\n  \"Commission\": \"0.50\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/vouchers/callback",
              "host": ["{{baseUrl}}"],
              "path": ["vouchers", "callback"]
            },
            "description": "Handle callback from voucher service"
          },
          "response": []
        }
      ]
    },
    {
      "name": "USSD Services",
      "description": "USSD session management and transaction status",
      "item": [
        {
          "name": "USSD Request",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"SessionId\": \"ussd_session_123456\",\n  \"Mobile\": \"233550123456\",\n  \"Type\": \"initiation\",\n  \"Message\": \"\",\n  \"Sequence\": 1\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/ussd",
              "host": ["{{baseUrl}}"],
              "path": ["ussd"]
            },
            "description": "Handle USSD requests"
          },
          "response": []
        },
        {
          "name": "Check USSD Transaction Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/transaction-status/ussd/check?clientReference=ussd_123456",
              "host": ["{{baseUrl}}"],
              "path": ["transaction-status", "ussd", "check"],
              "query": [
                {
                  "key": "clientReference",
                  "value": "ussd_123456"
                }
              ]
            },
            "description": "Check status of USSD transactions"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Authentication",
      "description": "User authentication and management",
      "item": [
        {
          "name": "User Login",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"user@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            },
            "description": "User login to get JWT token"
          },
          "response": []
        },
        {
          "name": "User Registration",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password123\",\n  \"firstName\": \"John\",\n  \"lastName\": \"Doe\",\n  \"phone\": \"233550123456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            },
            "description": "Register new user"
          },
          "response": []
        },
        {
          "name": "Get User Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/users/profile",
              "host": ["{{baseUrl}}"],
              "path": ["users", "profile"]
            },
            "description": "Get current user profile"
          },
          "response": []
        }
      ]
    },
    {
      "name": "System Health",
      "description": "System health and status endpoints",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "Check system health status"
          },
          "response": []
        },
        {
          "name": "Get USSD Logs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/ussd-logs?mobileNumber=233550123456&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["ussd-logs"],
              "query": [
                {
                  "key": "mobileNumber",
                  "value": "233550123456"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            },
            "description": "Get USSD interaction logs"
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Set default headers for all requests",
          "pm.request.headers.add({",
          "    key: 'Accept',",
          "    value: 'application/json'",
          "});"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Common test script for all requests",
          "pm.test(\"Status code is 200 or 201\", function () {",
          "    pm.expect(pm.response.code).to.be.oneOf([200, 201]);",
          "});",
          "",
          "pm.test(\"Response has success property\", function () {",
          "    const responseJson = pm.response.json();",
          "    pm.expect(responseJson).to.have.property('success');",
          "});",
          "",
          "pm.test(\"Response has message property\", function () {",
          "    const responseJson = pm.response.json();",
          "    pm.expect(responseJson).to.have.property('message');",
          "});"
        ]
      }
    }
  ]
}
