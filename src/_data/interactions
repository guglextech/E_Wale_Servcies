# USSD E-Voucher Purchase Flow - Interaction Guide

## Overview
This document outlines the complete USSD flow for purchasing BECE checker vouchers through Guglex Technologies.

## Flow Structure

### 1. Welcome Screen
```
I want buy result check e-voucher

Guglex Technologies
1. BECE checker voucher
2. WASSCE/ NovDec Checker - soon
3. School Placement Checker - soon
4. Retrive card - soon
0. Contact us
```

### 2. Service Selection
**User Input:** 1 (BECE checker voucher)
**Response:** Proceeds to buyer type selection

**User Input:** 0 (Contact us)
**Response:** Shows contact information and ends session

**User Input:** 2, 3, or 4
**Response:** "This service is coming soon. Please select BECE checker voucher for now."

### 3. Buyer Type Selection
```
Buy for:
1. Buy for me
2. For other
```

### 4A. Buy for Me Flow
**User Input:** 1
**Response:** 
```
I have mobile number already
Enter quantity:
```

**User Input:** [quantity number 1-100]
**Response:** Shows order details

### 4B. For Other Flow
**User Input:** 2
**Response:** 
```
Enter other mobile number:
```

**User Input:** [mobile number]
**Response:** 
```
Enter recipient's name:
```

**User Input:** [name]
**Response:** 
```
Enter quantity:
```

**User Input:** [quantity number 1-100]
**Response:** Shows order details

### 5. Order Details
```
Details
Service: BECE checker voucher
Quantity: [X]
Amount: GH₵ [X.00]

1. Confirm
2. Cancel
```

### 6. Payment Confirmation
**User Input:** 1 (Confirm)
**Response:**
```
Confirm prompt for payment

Service: BECE checker voucher
Quantity: [X]
Total Amount: GH₵ [X.00]

1. Confirm payment prompt
2. Cancel
```

**User Input:** 2 (Cancel)
**Response:** Session ends with thank you message

### 7. Final Payment Processing
**User Input:** 1 (Confirm payment prompt)
**Response:** 
```
Payment request for GH₵ [X.00] has been submitted. 
Please wait for a payment prompt soon. 
If no prompt, Dial *170#- My Account-My approvals
```

## Testing Scenarios

### Scenario 1: Buy for Self
1. Dial USSD code
2. Select 1 (BECE checker voucher)
3. Select 1 (Buy for me)
4. Enter quantity (e.g., 2)
5. Confirm order details
6. Confirm payment
7. Complete payment flow

**Expected Result:** Voucher purchased for user's own mobile number

### Scenario 2: Buy for Other
1. Dial USSD code
2. Select 1 (BECE checker voucher)
3. Select 2 (For other)
4. Enter recipient mobile number (e.g., 0241234567)
5. Enter recipient name (e.g., John Doe)
6. Enter quantity (e.g., 1)
7. Confirm order details
8. Confirm payment
9. Complete payment flow

**Expected Result:** Voucher purchased for specified recipient

### Scenario 3: Contact Information
1. Dial USSD code
2. Select 0 (Contact us)
3. View contact information
4. Session ends

**Expected Result:** Contact details displayed, session terminated

### Scenario 4: Invalid Inputs
1. Dial USSD code
2. Select invalid service (2, 3, or 4)
3. See "coming soon" message
4. Return to service selection

**Expected Result:** Appropriate error messages, flow continues

### Scenario 5: Quantity Validation
1. Dial USSD code
2. Select 1 (BECE checker voucher)
3. Select 1 (Buy for me)
4. Enter invalid quantity (e.g., 0, 101, or text)
5. See validation error
6. Enter valid quantity

**Expected Result:** Invalid inputs rejected with clear error messages

## Price Structure
- **BECE checker voucher:** GH₵ 5.00 per voucher
- **Total amount:** Quantity × GH₵ 5.00

## Database Records
- **Ticket:** Stores voucher purchase details
- **Transaction:** Records payment information
- **Hubtel Payments:** Tracks payment status

## SMS Delivery
After successful payment:
- Voucher details sent via SMS to user/recipient
- Includes quantity and voucher information
- Sent to the mobile number specified in the flow

## Error Handling
- Invalid mobile numbers rejected
- Names must be minimum 2 characters
- Quantities must be 1-100
- Invalid selections show appropriate error messages
- Session timeout after inactivity

## Session Management
- Each USSD session maintains state
- Session data cleared after completion or timeout
- Mobile number and user details preserved throughout flow 